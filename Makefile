################################################################################
#
# AUTHOR:	SYED ASAD AMIN
# DATE:		Oct 24th, 2020
# FILE:		Makefile
# VERSION:	v1.0.0
#
# NOTE:		A GENERIC MAKE FILE TO COMPILE TARGET
#			PROJECT STRUCTURE:
#			Project Dir/
#				inc/ -> All header files placed here
#				src/ -> All source files placed here
#				lib/ -> All library files placed here
#				bin/ -> All binary files placed here
#			Makefile
#
################################################################################

################################################################################
# TARGET NAME
################################################################################
TARGET = main
################################################################################

################################################################################
# DIRECTORIES NAME
################################################################################
SRC = src
INC = inc
LIB = lib
BIN = bin
################################################################################

################################################################################
# SOURCE LIST
################################################################################
SOURCE = $(wildcard $(SRC)/*.cpp)
OBJECT = $(patsubst %,$(BIN)/%, $(notdir $(SOURCE:.cpp=.o)))
################################################################################

################################################################################
# C COMPILER AND FLAGS
################################################################################
CC = g++
CFLAGS = -Wall -std=c++14 -I$(INC) -lwiringPi -L$(LIB)
################################################################################

################################################################################
# MAKE TARGET SECTION
# Call using following command
# make
################################################################################
$(BIN)/$(TARGET) : $(OBJECT)
	@echo "Linking..."
	$(CC) $(CFLAGS) -o $@ $^
	@echo "Finished..."

$(BIN)/%.o : $(SRC)/%.cpp
	@echo "Compiling..."
	$(CC) $(CFLAGS) -c $< -o $@
################################################################################

.PHONY : help run clean

################################################################################
# RUN SECTION
# Call using following command
# make run
################################################################################
run: $(BIN)/$(TARGET)
	@echo "Running..."
	$(BIN)/$(TARGET)
################################################################################

################################################################################
# CLEAN SECTION
# Call using following command
# make clean
################################################################################
clean:
	@echo "Cleaning..."
	rm -f $(OBJECT) $(BIN)/$(TARGET)
################################################################################

################################################################################
# HELP SECTION
# Call using following command
# make help
################################################################################
help:
	@ehco "Help..."
	@echo "src: ${SOURCE}"
	@echo "obj: $(OBJECT)"
################################################################################
